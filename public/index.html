<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SSOT • Portal Operativo</title>
  <link rel="preload" href="/fonts/Inter-Variable.woff2" as="font" type="font/woff2" crossorigin>
  <style>/* CRITICAL CSS START */*{box-sizing:border-box}html,body{height:100%;margin:0;padding:0}body{font:16px/1.45 'Inter',system-ui,-apple-system,sans-serif;background:var(--bg,#f6f7f9);color:var(--text,#111)}:root{--bg:#f6f7f9;--surface:#fff;--text:#111;--text-secondary:#6b7280;--border:#e5e7eb;--brand:#111;--accent:#0f766e;--danger:#b91c1c;--font-sans:'Inter',system-ui,-apple-system,sans-serif;}@media(prefers-color-scheme:dark){:root{--bg:#0b0c0f;--surface:#111418;--text:#f3f4f6;--text-secondary:#9ca3af;--border:#1f2937;--brand:#e5e7eb;--accent:#14b8a6;--danger:#ef4444;}}.dark{--bg:#0b0c0f;--surface:#111418;--text:#f3f4f6;--text-secondary:#9ca3af;--border:#1f2937;--brand:#e5e7eb;--accent:#14b8a6;--danger:#ef4444;}.topbar{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}.brand{display:flex;gap:10px;align-items:center}.logo{display:inline-grid;place-items:center;width:28px;height:28px;border-radius:6px;background:var(--brand);color:var(--surface);font-weight:700}.actions{display:flex;gap:8px}.btn{padding:8px 12px;border:1px solid var(--border);border-radius:8px;text-decoration:none;color:var(--text);background:var(--surface);cursor:pointer}.btn-primary{background:var(--brand);color:#fff;border-color:var(--brand)}.container{max-width:1100px;margin:24px auto;padding:0 16px}.status{display:flex;gap:12px;align-items:center;margin-bottom:12px}.badge{padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600}.badge-ok{background:#e8f8ee;color:#177245;border:1px solid #b8e3c8}.dark .badge-ok{background:rgba(20,184,166,0.1);color:#14b8a6;border-color:#14b8a6}.cards{display:grid;grid-template-columns:repeat(4,minmax(160px,1fr));gap:12px;margin:16px 0}.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px}.card h3{margin:0 0 6px 0;font-size:13px;color:var(--text-secondary)}.card .v{font-size:20px;font-weight:700;color:var(--text)}#themeToggle,#langSelector{background:transparent;border:1px solid var(--border);border-radius:6px;padding:6px 8px;cursor:pointer}@media(max-width:900px){.cards{grid-template-columns:repeat(2,1fr)}}@media(max-width:520px){.cards{grid-template-columns:1fr}}/* CRITICAL CSS END */</style>
  <style>/* CRITICAL CSS START */*{box-sizing:border-box}html,body{height:100%;margin:0;padding:0}body{font:16px/1.45 'Inter',system-ui,-apple-system,sans-serif;background:var(--bg,#f6f7f9);color:var(--text,#111)}:root{--bg:#f6f7f9;--surface:#fff;--text:#111;--text-secondary:#6b7280;--border:#e5e7eb;--brand:#111;--accent:#0f766e;--danger:#b91c1c;--font-sans:'Inter',system-ui,-apple-system,sans-serif;}@media(prefers-color-scheme:dark){:root{--bg:#0b0c0f;--surface:#111418;--text:#f3f4f6;--text-secondary:#9ca3af;--border:#1f2937;--brand:#e5e7eb;--accent:#14b8a6;--danger:#ef4444;}}.dark{--bg:#0b0c0f;--surface:#111418;--text:#f3f4f6;--text-secondary:#9ca3af;--border:#1f2937;--brand:#e5e7eb;--accent:#14b8a6;--danger:#ef4444;}.topbar{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}.brand{display:flex;gap:10px;align-items:center}.logo{display:inline-grid;place-items:center;width:28px;height:28px;border-radius:6px;background:var(--brand);color:var(--surface);font-weight:700}.actions{display:flex;gap:8px}.btn{padding:8px 12px;border:1px solid var(--border);border-radius:8px;text-decoration:none;color:var(--text);background:var(--surface);cursor:pointer}.btn-primary{background:var(--brand);color:#fff;border-color:var(--brand)}.container{max-width:1100px;margin:24px auto;padding:0 16px}.status{display:flex;gap:12px;align-items:center;margin-bottom:12px}.badge{padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600}.badge-ok{background:#e8f8ee;color:#177245;border:1px solid #b8e3c8}.dark .badge-ok{background:rgba(20,184,166,0.1);color:#14b8a6;border-color:#14b8a6}.cards{display:grid;grid-template-columns:repeat(4,minmax(160px,1fr));gap:12px;margin:16px 0}.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px}.card h3{margin:0 0 6px 0;font-size:13px;color:var(--text-secondary)}.card .v{font-size:20px;font-weight:700;color:var(--text)}#themeToggle,#langSelector{background:transparent;border:1px solid var(--border);border-radius:6px;padding:6px 8px;cursor:pointer}@media(max-width:900px){.cards{grid-template-columns:repeat(2,1fr)}}@media(max-width:520px){.cards{grid-template-columns:1fr}}/* CRITICAL CSS END */</style>
  <link rel="stylesheet" href="/shared/tokens.css">
  <link rel="stylesheet" href="/home.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">⟟</span>
      <h1 data-i18n="home.title">Interior Catalog SSOT</h1>
    </div>
    <nav class="actions">
      <a class="btn" href="/app/" data-i18n="home.openFieldApp">Abrir Field App</a>
      <a class="btn btn-primary" href="/ops/" data-i18n="home.viewDashboard">Ver Dashboard</a>
      <select id="langSelector" aria-label="Language" title="Select language">
        <option value="es">ES</option>
        <option value="en">EN</option>
      </select>
      <button id="themeToggle" aria-label="Cambiar tema" class="btn-icon">
        <!-- Muestra luna en tema claro -->
        <svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M21 12.8A9 9 0 1 1 11.2 3a7 7 0 0 0 9.8 9.8z"/>
        </svg>
        <!-- Muestra sol en tema oscuro -->
        <svg class="icon icon-sun" viewBox="0 0 24 24" aria-hidden="true">
          <g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v3M12 20v3M4.2 4.2l2.1 2.1M17.7 17.7l2.1 2.1M1 12h3M20 12h3M4.2 19.8l2.1-2.1M17.7 6.3l2.1-2.1"/>
          </g>
        </svg>
      </button>
    </nav>
  </header>

  <main class="container">
    <section class="status">
      <div class="badge badge-ok" data-i18n="home.systemActive">Sistema Activo</div>
      <small id="buildMeta" class="meta" data-i18n="home.compiling">Compilando…</small>
    </section>

    <section class="cards" id="kpiCards">
      <!-- Se llenan desde index.js -->
    </section>

    <section class="panel">
      <div class="panel-head">
        <h2 data-i18n="home.projects">Proyectos</h2>
        <div class="panel-actions">
          <a class="link" href="/ops/" data-i18n="home.goToDetail">Ir al detalle →</a>
        </div>
      </div>
      <div class="table-wrap">
        <table class="table" id="projectsTable">
          <thead>
            <tr>
              <th data-i18n="home.project">Proyecto</th>
              <th>P50</th>
              <th>P80</th>
              <th data-i18n="home.waste">Merma</th>
              <th data-i18n="home.qcGate">QC Gate</th>
            </tr>
          </thead>
          <tbody><!-- rows dinámicas --></tbody>
        </table>
      </div>
    </section>

    <section class="quicklinks">
      <a class="ql" href="/app/#/qc/DEMO-001/pre_cnc">➜ Abrir formulario DEMO‑001 (pre‑CNC)</a>
      <a class="ql" href="/api/projects.json">➜ Ver API /projects.json</a>
      <a class="ql" href="/api/ops/index.json">➜ Ver API /ops/index.json</a>
    </section>
  </main>

  <footer class="footer">
    <small>SSOT • Static-first • Netlify • GitHub</small>
  </footer>

  <script src="/shared/i18n.js" defer></script>
  <script src="/shared/theme.js" defer></script>
  <script src="/index.js" defer></script>
</body>
</html>